<template>
    <div>
        <!-- 登录注册开始 -->
        <div class="top">
            <van-row type="flex" justify="end">
                <van-col span="12"></van-col>
                <van-col span="3" class="set">
                    <van-cell @click="show = true" class="seticon">
                        <van-icon name="setting-o" color="#fff" v-show="$store.state.username"/>
                    </van-cell>
                    <van-action-sheet v-model="show" cancel-text="退出登录" @cancel="$store.state.username=''" @click="onCancel"/>
                </van-col>
                <van-col span="3" class="message" @click="getNews">
                    <span class="iconfont icon-Group-"></span>
                </van-col>
            </van-row>
            <van-row gutter="12" class="bottom">
                <van-col span="2"></van-col>
                <van-col span="4">
                    <van-image
                        round
                        width="62px"
                        height="62px"
                        type="cover"
                        src="https://ae01.alicdn.com/kf/H8d9b3a66bfb7415b975285b7920d8720F.jpg"
                    />
                </van-col>
                <van-col span="17" class="word">
                    <div v-if="$store.state.username">
                        <span v-text="$store.state.username" class="uname"></span>
                    </div>
                    <div v-else>
                        <router-link to="/login" >登陆</router-link>
                        <router-link to="/register" class="register">注册</router-link>
                    </div>
                </van-col>
            </van-row>
            <div class="vip" v-if="$store.state.username">
                <span><img src="../assets/img/yuan.png"></span>
                <span class="member"> 普通会员 0积分</span>
            </div>
        </div>
        <!-- 登录注册结束 -->

        <!-- 订单导航开始 -->
        <div class="all">
            <van-row class="first">
                <van-col span="12" @click="getPay">
                    <svg width="28" height="28" viewBox="0 0 1024 1024"><path d="M128 237.714286c0-25.6 36.571429-25.6 36.571429 0 0 18.285714 14.628571 36.571429 32.914285 36.571428h625.371429c10.971429 0 18.285714 7.314286 18.285714 18.285715v212.114285c0 10.971429-7.314286 18.285714-18.285714 18.285715s-18.285714-7.314286-18.285714-18.285715V307.2H197.485714c-10.971429 0-25.6-3.657143-32.914285-7.314286v471.771429c0 47.542857 40.228571 87.771429 87.771428 87.771428h555.885714v-193.828571c0-10.971429 7.314286-18.285714 18.285715-18.285714s18.285714 7.314286 18.285714 18.285714V877.714286c0 10.971429-7.314286 18.285714-18.285714 18.285714H252.342857c-69.485714 0-124.342857-54.857143-124.342857-124.342857V237.714286z" fill="#363433"></path><path d="M694.857143 164.571429c10.971429 0 18.285714 7.314286 18.285714 18.285714v106.057143c0 10.971429-7.314286 18.285714-18.285714 18.285714H197.485714c-40.228571 0-69.485714-32.914286-69.485714-73.142857s32.914286-73.142857 69.485714-73.142857H694.857143z m-18.285714 36.571428H197.485714c-18.285714 0-32.914286 14.628571-32.914285 36.571429s14.628571 36.571429 32.914285 36.571428h479.085715v-73.142857zM859.428571 647.314286v-124.342857H694.857143c-32.914286 0-58.514286 29.257143-58.514286 62.171428s25.6 62.171429 58.514286 62.171429h164.571428z m18.285715 36.571428h-182.857143c-54.857143 0-95.085714-43.885714-95.085714-98.742857s43.885714-98.742857 95.085714-98.742857h182.857143c10.971429 0 18.285714 7.314286 18.285714 18.285714v160.914286c0 7.314286-7.314286 18.285714-18.285714 18.285714z" fill="#363433"></path><path d="M720.457143 603.428571c-10.971429 0-18.285714-7.314286-18.285714-18.285714s7.314286-18.285714 18.285714-18.285714h25.6c10.971429 0 18.285714 7.314286 18.285714 18.285714s-7.314286 18.285714-18.285714 18.285714h-25.6z" fill="#363433"></path></svg>
                    待付款
                </van-col>
                <!-- <van-col span="8">
                    <svg width="28" height="28" viewBox="0 0 1024 1024"><path d="M837.485714 394.971429h-266.971428c-10.971429 0-18.285714-7.314286-18.285715-18.285715s7.314286-18.285714 18.285715-18.285714h285.257143c10.971429 0 18.285714 7.314286 18.285714 18.285714v142.628572l84.114286 25.6c7.314286 3.657143 10.971429 10.971429 10.971428 18.285714v186.514286c0 10.971429-7.314286 18.285714-18.285714 18.285714h-113.371429c-10.971429 0-18.285714-7.314286-18.285714-18.285714s7.314286-18.285714 18.285714-18.285715h95.085715v-153.6l-84.114286-29.257142c-7.314286-3.657143-10.971429-10.971429-10.971429-18.285715v-135.314285zM665.6 731.428571c10.971429 0 18.285714 7.314286 18.285714 18.285715s-7.314286 18.285714-18.285714 18.285714h-98.742857c-10.971429 0-18.285714-7.314286-18.285714-18.285714s7.314286-18.285714 18.285714-18.285715h98.742857z" fill="#1E1E1E"></path><path d="M91.428571 731.428571h102.4c10.971429 0 18.285714 7.314286 18.285715 18.285715s-7.314286 18.285714-18.285715 18.285714H73.142857c-10.971429 0-18.285714-7.314286-18.285714-18.285714V219.428571c0-10.971429 7.314286-18.285714 18.285714-18.285714h497.371429c10.971429 0 18.285714 7.314286 18.285714 18.285714v530.285715c0 10.971429-7.314286 18.285714-18.285714 18.285714h-186.514286c-10.971429 0-18.285714-7.314286-18.285714-18.285714s7.314286-18.285714 18.285714-18.285715h168.228571V237.714286H91.428571V731.428571z" fill="#1E1E1E"></path><path d="M288.914286 672.914286c-43.885714 0-76.8 32.914286-76.8 76.8 0 40.228571 32.914286 73.142857 76.8 73.142857s76.8-32.914286 76.8-73.142857c0-43.885714-32.914286-76.8-76.8-76.8z m0-36.571429c62.171429 0 113.371429 51.2 113.371428 113.371429 0 62.171429-51.2 109.714286-113.371428 109.714285s-113.371429-51.2-113.371429-109.714285c0-62.171429 51.2-113.371429 113.371429-113.371429zM746.057143 702.171429c-32.914286 0-62.171429 25.6-62.171429 58.514285 0 32.914286 25.6 58.514286 62.171429 58.514286s62.171429-25.6 62.171428-58.514286c-3.657143-29.257143-29.257143-58.514286-62.171428-58.514285z m0-36.571429c54.857143 0 98.742857 43.885714 98.742857 95.085714 0 54.857143-43.885714 95.085714-98.742857 95.085715s-98.742857-43.885714-98.742857-95.085715c0-51.2 43.885714-95.085714 98.742857-95.085714zM760.685714 512c10.971429 0 18.285714 7.314286 18.285715 18.285714s-7.314286 18.285714-18.285715 18.285715h-62.171428c-10.971429 0-18.285714-7.314286-18.285715-18.285715v-62.171428c0-10.971429 7.314286-18.285714 18.285715-18.285715s18.285714 7.314286 18.285714 18.285715V512h43.885714z" fill="#1E1E1E"></path></svg>
                    待发货
                </van-col> -->
                <van-col span="12" @click="getGoods">
                    <svg width="28" height="28" viewBox="0 0 1024 1024"><path d="M128 201.142857v98.742857h768V201.142857h-768z m-18.285714-36.571428h804.571428c10.971429 0 18.285714 7.314286 18.285715 18.285714v135.314286c0 10.971429-7.314286 18.285714-18.285715 18.285714H109.714286c-10.971429 0-18.285714-7.314286-18.285715-18.285714V182.857143c0-10.971429 7.314286-18.285714 18.285715-18.285714z" fill="#363433"></path><path d="M815.542857 859.428571V318.171429c0-10.971429 7.314286-18.285714 18.285714-18.285715s18.285714 7.314286 18.285715 18.285715V877.714286c0 10.971429-7.314286 18.285714-18.285715 18.285714H190.171429c-10.971429 0-18.285714-7.314286-18.285715-18.285714V318.171429c0-10.971429 7.314286-18.285714 18.285715-18.285715s18.285714 7.314286 18.285714 18.285715v541.257142h607.085714z" fill="#363433"></path><path d="M629.028571 201.142857h-230.4v98.742857h36.571429c10.971429 0 18.285714 7.314286 18.285714 18.285715V585.142857l54.857143-18.285714h10.971429l54.857143 18.285714V318.171429c0-10.971429 7.314286-18.285714 18.285714-18.285715h36.571428V201.142857z m-252.342857 135.314286c-10.971429 0-18.285714-7.314286-18.285714-18.285714V182.857143c0-10.971429 7.314286-18.285714 18.285714-18.285714h266.971429c10.971429 0 18.285714 7.314286 18.285714 18.285714v135.314286c0 10.971429-7.314286 18.285714-18.285714 18.285714h-36.571429v274.285714c0 10.971429-10.971429 21.942857-25.6 18.285714l-73.142857-25.6-73.142857 25.6c-10.971429 3.657143-25.6-3.657143-25.6-18.285714V336.457143h-32.914286z" fill="#363433"></path></svg>
                    待收货
                </van-col>
            </van-row>
            <van-row class="second">
                <van-col span="12" @click="getEnd">
                    <svg width="28" height="28" viewBox="0 0 1024 1024"><path d="M230.4 394.971429c0 135.314286 131.657143 274.285714 281.6 299.885714 142.628571-25.6 266.971429-160.914286 266.971429-303.542857 0-47.542857-10.971429-95.085714-32.914286-138.971429-25.6 7.314286-54.857143 18.285714-76.8 32.914286l-36.571429 21.942857-18.285714-36.571429c-25.6-54.857143-58.514286-98.742857-102.4-135.314285-47.542857 36.571429-87.771429 84.114286-109.714286 135.314285l-18.285714 40.228572-36.571429-18.285714c-25.6-18.285714-54.857143-29.257143-84.114285-36.571429-21.942857 43.885714-32.914286 87.771429-32.914286 138.971429zM365.714286 259.657143c3.657143-3.657143 21.942857-43.885714 51.2-84.114286 25.6-32.914286 65.828571-69.485714 91.428571-84.114286 21.942857 14.628571 51.2 36.571429 84.114286 76.8 10.971429 14.628571 29.257143 43.885714 51.2 84.114286 58.514286-25.6 95.085714-36.571429 113.371428-40.228571 32.914286 51.2 51.2 113.371429 51.2 179.2 0 164.571429-146.285714 314.514286-303.542857 340.114285-157.257143-25.6-318.171429-175.542857-318.171428-336.457142 0-65.828571 18.285714-128 51.2-179.2C277.942857 219.428571 358.4 256 365.714286 259.657143zM650.971429 841.142857c-3.657143 14.628571-3.657143 25.6 0 40.228572 40.228571 0 73.142857-29.257143 84.114285-69.485715 3.657143-14.628571 3.657143-25.6 0-40.228571-36.571429 3.657143-73.142857 29.257143-84.114285 69.485714z m117.028571-91.428571c7.314286 21.942857 7.314286 47.542857 0 73.142857-14.628571 62.171429-73.142857 102.4-135.314286 95.085714L621.714286 914.285714l-3.657143-10.971428c-7.314286-21.942857-7.314286-47.542857 0-73.142857 14.628571-62.171429 73.142857-102.4 135.314286-95.085715h10.971428l3.657143 14.628572zM332.8 870.4c10.971429 7.314286 25.6 10.971429 36.571429 10.971429 7.314286-40.228571-7.314286-80.457143-43.885715-98.742858-10.971429-7.314286-25.6-10.971429-36.571428-10.971428-7.314286 36.571429 10.971429 76.8 43.885714 98.742857z m-58.514286-135.314286c25.6 0 47.542857 3.657143 69.485715 18.285715 54.857143 32.914286 76.8 98.742857 54.857142 157.257142l-3.657142 10.971429h-10.971429c-25.6 0-47.542857-3.657143-69.485714-18.285714-54.857143-32.914286-76.8-98.742857-54.857143-157.257143l3.657143-10.971429h10.971428zM512 768c10.971429 0 18.285714 7.314286 18.285714 18.285714v182.857143c0 10.971429-7.314286 18.285714-18.285714 18.285714s-18.285714-7.314286-18.285714-18.285714v-182.857143c0-10.971429 7.314286-18.285714 18.285714-18.285714z" fill="#363433"></path></svg>
                    待评价
                </van-col>
                <!-- <van-col span="8">
                    <svg width="28" height="28" viewBox="0 0 1024 1024"><path d="M512 896C299.885714 896 128 724.114286 128 512S299.885714 128 512 128 896 299.885714 896 512 724.114286 896 512 896z m0-36.571429c190.171429 0 347.428571-157.257143 347.428571-347.428571S702.171429 164.571429 512 164.571429 164.571429 321.828571 164.571429 512s157.257143 347.428571 347.428571 347.428571z" fill="#1E1E1E"></path><path d="M237.714286 512c0-10.971429 7.314286-18.285714 18.285714-18.285714s18.285714 7.314286 18.285714 18.285714c0 131.657143 106.057143 237.714286 237.714286 237.714286s237.714286-106.057143 237.714286-237.714286-106.057143-237.714286-237.714286-237.714286c-10.971429 0-18.285714-7.314286-18.285714-18.285714s7.314286-18.285714 18.285714-18.285714c149.942857 0 274.285714 124.342857 274.285714 274.285714s-124.342857 274.285714-274.285714 274.285714-274.285714-124.342857-274.285714-274.285714z" fill="#1E1E1E"></path><path d="M676.571429 512c0 10.971429-7.314286 18.285714-18.285715 18.285714s-18.285714-7.314286-18.285714-18.285714c0-69.485714-58.514286-128-128-128s-128 58.514286-128 128 58.514286 128 128 128c10.971429 0 18.285714 7.314286 18.285714 18.285714s-7.314286 18.285714-18.285714 18.285715c-91.428571 0-164.571429-73.142857-164.571429-164.571429s73.142857-164.571429 164.571429-164.571429 164.571429 73.142857 164.571429 164.571429z" fill="#1E1E1E"></path></svg>
                    <span>售</span><span> <span></span>后</span>
                </van-col> -->
                <van-col span="12" @click="getOrder">全部订单 ></van-col>
            </van-row>
        </div>
        <!-- 订单导航结束 -->

        <!-- 优惠开始 -->
        <van-row class="list">
            <van-col span="12" @click="$router.push('/card')">
                <span>0</span>
                <div>优惠券</div>
            </van-col>
            <van-col span="12" @click="$router.push('/gift')">
                <span>0</span>
                <div>礼品卡</div>
            </van-col>
            <!-- <van-col span="6">
                <span>0</span>
                <div>我的收藏</div>
            </van-col>
            <van-col span="6">
                <span>0</span>
                <div>浏览记录</div>
            </van-col> -->
        </van-row>
        <!-- 优惠结束 -->

        <!-- 列表开始 -->
        <van-cell-group class="lists">
            <van-cell title="我的门票" is-link @click="dialog" icon="coupon-o"/>
            <van-cell title="我的地址" is-link @click="address" icon="location-o"/>
        </van-cell-group>
        <!-- 列表结束 -->
        
        <!-- 引入组件 -->
        <recommend></recommend>
        <vantabber></vantabber>
    </div>
</template>

<script>
    import recommend from "../components/recommend/recommend"
    import vantabber from "../components/public/vantabbar.vue"
    import { Toast } from 'vant';
    export default {
        data() {
            return {
                show: false,
            };
        },
        methods:{
            getNews() {
                this.$router.push("/news");
            },
            getPay() {
                this.$store.state.order.active=1;
                this.$router.push("/orderList/orderPay")
            },
            getGoods() {
                this.$store.state.order.active=2;
                this.$router.push("/orderList/orderGoods")
            },
            getEnd() {
                this.$store.state.order.active=3;
                this.$router.push("/orderList/orderEnd")
            },
            getOrder() {
                this.$store.state.order.active=0;
                this.$router.push("/orderlist/orderAll")
            },
            getCard() {
                this.$router.push("/")
            },
            onCancel() {
                Toast('退出登录');
            },
            dialog(){
                this.$dialog.confirm({
                    title: '即将进入第三方平台',
                    message: '您即将进入旅游频道',
                })
                .then(() => {
                    // on confirm
                })
                .catch(() => {
                    // on cancel
                });
            },
            // 定义跳转方法
            address(){
                // 如果地址没有数据，直接跳转地址添加页面
                if(this.$store.state.address.lists.length == 0){
                    this.$router.push('/addressAdd')
                }else{
                    this.$router.push('/address')
                }
            }
        },
        components:{
            recommend,
            vantabber,
        },
        created(){
            this.$store.state.active = 3;
        }
    }
</script>

<style lang="scss" scoped>
// 顶部登录注册样式
.top{
    height: 233px;
    background-image: linear-gradient(to right,#E7203D ,#C81488);
    background-size: 100% auto;
    border-bottom-left-radius: 10px;
    border-bottom-right-radius: 10px;
    .set{
        text-align: center;
        .seticon{
            margin-top: 8px;
            font-size: 20px;
            text-align: center;
            padding-right: 0;
            background-color: rgba(0,0,0,0);
            position: static;
        }
    }
    .message{
        height: 50px;
        line-height: 50px;
        text-align: center;
        color: white;
        padding-right: 5px;
        margin-top: 5px;
        .icon-Group-{
            font-size: 25px;
        }
    }
    .bottom{
        height: 55px;
        margin-top: 20px;
        font-size: 16px;
        .van-image{
            border: 2px solid white;
            text-align: center;
        }
        .word{
            margin-top: 35px;
            font-size: 14px;
            a{
                
                color:#fff;
            }
            .register{
                margin-left: 10px;
            }
        }
    }
}
// 普通会员样式
.vip{
    position: relative;
    width: 100px;
    height: 16px;
    border-radius: 50px;
    background-color: rgba(0,0,0,.5);
    color: white;
    font-size: 11px;
    line-height: 16px;
    display: inline-block;
    margin-left: 6px;
    img{
        width: 13px;
        height: 13px;
        vertical-align: middle;
        margin-left: 3px;
    }
    .member{
        position: relative;
        top: 1px;
    }
}
// 用户名样式
.uname{
    color: #fff;
}
// 头像样式
.van-image{
    float: right;
    margin-top:15px;
}
// 全部订单样式
.all{
    position: relative;
    left: 0;
    top:-50px;
    height: 110px;
    background-color: #fff;
    margin-left: 10px;
    border-radius: 3px;
    margin-right: 10px;
    color: #323232;
    .first{
        margin-left: 10px;
        margin-right: 10px;
        .van-col--12{
            border-bottom: 1px solid #eee;
        }
    }
    .second{
        margin-left: 10px;
        margin-right: 10px;
    }
    .van-col--12{
        height: 55px;
        line-height: 55px;
        text-align: center;
        background-color: #fff;
        font-size: 13px;
    }
    svg{
        vertical-align: middle;
    }
    span{
        margin-left: 5px;
    }
}
// 优惠样式
.list{
    position: relative;
    top: -40px;
    margin-left: 10px;
    margin-right: 10px;
    height: 42px;
    text-align: center;
    line-height: 10px;
    padding: 17px 0;
    background-color: #fff;
    .van-col--12{
        background-color: #fff;
        font-size: 12px;
        border-right: 1px solid #f7f7f7;
        span{
            height: 30px;
            display: block;
            line-height: 20px;
            color:#C62F2E;
        }
        div{
            color: #74787a;
        }
    }
}
// 列表样式
.lists{
    position: relative;
    top: -30px;
    margin-left: 10px;
    margin-right: 10px;
    .van-cell{
        height: 60px;
        line-height: 40px;
    }
    .van-icon{
        line-height: 40px;
    }
}
</style>
<style lang="scss">
.van-dialog__confirm, .van-dialog__confirm:active{
    color: white;
    background-color: #C62F2E;
}
</style>